---
layout: project
title: WhisperTranscriberBot
subtitle: AI Telegram Bot for Voice-to-Text Transcription with Monetization and Monitoring
# date: 2024-06-01
featured: true
tech: ["Python", "Telegram API", "FastAPI", "PostgreSQL", "Redis", "Docker", "RabbitMQ", "Prometheus", "Grafana", "Whisper AI", "Microservices"]
role: Full-Stack Developer
status: Actively Maintained
cover: /assets/images/whispertranscriberbot/cover.png
images:
  - src: /assets/images/whispertranscriberbot/screenshot_main.png
    alt: Основная функция транскрибации
    caption: Основная функциональность транскрибации
  - src: /assets/images/whispertranscriberbot/whispertranscriberbot_architecture.png
    alt: Диаграмма улучшенной микросервисной архитектуры
    caption: Детальная диаграмма взаимодействия микросервисов с RabbitMQ и стеком мониторинга
  - src: /assets/images/whispertranscriberbot/db_schema.png
    alt: ER-диаграмма и схема базы данных
    caption: Схема базы данных PostgreSQL и описание таблиц
  - src: /assets/images/whispertranscriberbot/streamlit_dashboard.png
    alt: Панель аналитики
    caption: (Старая) Панель мониторинга аналитики бота и состояния системы в реальном времени
links:
  # repo: https://github.com/MishaNya/WhisperTranscriberBotDocker # Замени на актуальную ссылку на GitHub
  extra:
    - label: Попробуйте сами
      url: https://t.me/WHISPERTRANSCRIBER_BOT
---

## Description

Я разработал **WhisperTranscriberBot** — Telegram-бота, который позволяет пользователям транскрибировать голосовые и видеосообщения, а также аудио- и видеофайлы (MP3, MP4, OGG и др.) прямо в мессенджере. Проект реализован с использованием микросервисной архитектуры, что обеспечивает высокую надежность и масштабируемость.

### Улучшенная архитектура

Бот был полностью переработан в распределенную систему с акцентом на масштабируемость, надежность и наблюдаемость. Новая архитектура включает следующие ключевые компоненты:

*   **Основные сервисы:**
    *   **Сервис приема бота (Bot Receiver Service):** Принимает обновления Telegram и публикует их в очередь RabbitMQ.
    *   **Основной рабочий сервис (Main Worker Service):** Обрабатывает бизнес-логику, аутентификацию пользователей, операции с базой данных и координирует запросы на транскрибацию.
    *   **Сервис транскрибации (Transcription Service):** Выполняет GPU-ускоренную транскрибацию аудио/видео с использованием модели Whisper LargeV3.
    *   **Сервис ограничения скорости (Rate Limiter Service):** Управляет исходящими сообщениями для соблюдения ограничений скорости Telegram API.
*   **Брокер сообщений (RabbitMQ):** Разделяет сервисы и обеспечивает надежную доставку сообщений между ними.
*   **Хранение данных:**
    *   **PostgreSQL:** Основная база данных для хранения пользовательских данных, транскрипций и платежей.
    *   **Redis:** Используется для кэширования, ограничения скорости и управления сессиями.
*   **Стек наблюдаемости:**
    *   **Prometheus:** Собирает метрики о состоянии сервисов, глубине очередей, использовании GPU и многом другом.
    *   **Grafana:** Предоставляет дашборды для визуализации метрик и оповещения об аномалиях.

### Влияние и масштаб

Бот активно используется и успешно функционирует, обрабатывая запросы от значительной пользовательской базы:
*   **Пользовательских чатов:** 1010
*   **Групповых/канальных чатов:** 174
*   **Общее количество участников в группах/каналах:** 34309

Эти показатели подтверждают востребованность решения и его стабильную работу под нагрузкой.

### Следующие шаги и будущее видение

Миграция на новую микросервисную архитектуру завершена. Будущие планы включают:

*   **Внедрение распределенной трассировки с Zipkin** для более глубокого понимания потоков запросов и выявления узких мест в производительности.
*   **Дальнейшая оптимизация сервиса транскрибации** для еще более быстрой и эффективной обработки.
*   **Расширение функциональности бота** новыми возможностями на основе отзывов пользователей.
*   **Изучение возможности перехода на Golang** для еще большей производительности и эффективности использования ресурсов в долгосрочной перспективе.